{"version":3,"sources":["../src/confirm_delete_modal.js"],"names":["define","$","Ajax","str","ModalFactory","ModalEvents","Notification","on","btnId","attr","arr","split","scoreId","length","create","type","types","SAVE_CANCEL","title","body","then","modal","setSaveButtonText","root","getRoot","save","call","methodname","args","done","window","location","href","fail","exception","show"],"mappings":"AAqBAA,OAAM,wCAAC,CACH,QADG,CAEH,WAFG,CAGH,UAHG,CAIH,oBAJG,CAKH,mBALG,CAMH,mBANG,CAAD,CAOH,SAASC,CAAT,CACSC,CADT,CAESC,CAFT,CAGSC,CAHT,CAISC,CAJT,CAKSC,CALT,CAKuB,CAEtBL,CAAC,CAAC,aAAD,CAAD,CAAiBM,EAAjB,CAAoB,OAApB,CAA6B,UAAW,IAChCC,CAAAA,CAAK,CAAGP,CAAC,CAAC,IAAD,CAAD,CAAQQ,IAAR,CAAa,IAAb,CADwB,CAEhCC,CAAG,CAAGF,CAAK,CAACG,KAAN,CAAY,GAAZ,CAF0B,CAGhCC,CAAO,CAAGF,CAAG,CAACA,CAAG,CAACG,MAAJ,CAAa,CAAd,CAHmB,CAKpCT,CAAY,CAACU,MAAb,CAAoB,CAChBC,IAAI,CAAEX,CAAY,CAACY,KAAb,CAAmBC,WADT,CAEhBC,KAAK,CAAE,aAFS,CAGhBC,IAAI,CAAE,0CAHU,CAApB,EAIGC,IAJH,CAIQ,SAASC,CAAT,CAAgB,CACpBA,CAAK,CAACC,iBAAN,CAAwB,QAAxB,EAEA,GAAIC,CAAAA,CAAI,CAAGF,CAAK,CAACG,OAAN,EAAX,CACAD,CAAI,CAAChB,EAAL,CAAQF,CAAW,CAACoB,IAApB,CAA0B,UAAW,CASjCvB,CAAI,CAACwB,IAAL,CAAU,CAJI,CACVC,UAAU,qCADA,CAEVC,IAAI,CALK,CACT,QAAWhB,CADF,CAGC,CAIJ,CAAV,EAAqB,CAArB,EAAwBiB,IAAxB,CAA6B,UAAW,CACpCC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB/B,CAAC,CAAC8B,QAAD,CAAD,CAAYtB,IAAZ,CAAiB,MAAjB,CAC1B,CAFD,EAEGwB,IAFH,CAEQ3B,CAAY,CAAC4B,SAFrB,CAGH,CAZD,EAaAb,CAAK,CAACc,IAAN,EACH,CAtBD,CAuBH,CA5BD,CA6BH,CA3CK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Confirm modal before delete.\r\n * @author      ifahim1000\r\n * @module     local_footscore/confirm_delete\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\ndefine([\r\n    'jquery',\r\n    'core/ajax',\r\n    'core/str',\r\n    'core/modal_factory',\r\n    'core/modal_events',\r\n    'core/notification'\r\n], function($,\r\n            Ajax,\r\n            str,\r\n            ModalFactory,\r\n            ModalEvents,\r\n            Notification) {\r\n\r\n    $('.delete-btn').on('click', function() {\r\n        let btnId = $(this).attr(\"id\");\r\n        let arr = btnId.split(\"-\");\r\n        let scoreId = arr[arr.length - 1];\r\n\r\n        ModalFactory.create({\r\n            type: ModalFactory.types.SAVE_CANCEL,\r\n            title: 'Delete item',\r\n            body: 'Do you really want to delete the record?',\r\n        }).then(function(modal) {\r\n            modal.setSaveButtonText('Delete');\r\n\r\n            let root = modal.getRoot();\r\n            root.on(ModalEvents.save, function() {\r\n                let wsfunction = 'local_footscore_delete_score_by_id';\r\n                let params = {\r\n                    'scoreid': scoreId,\r\n                };\r\n                let request = {\r\n                    methodname: wsfunction,\r\n                    args: params\r\n                };\r\n                Ajax.call([request])[0].done(function() {\r\n                    window.location.href = $(location).attr('href');\r\n                }).fail(Notification.exception);\r\n            });\r\n            modal.show();\r\n        });\r\n    });\r\n});"],"file":"confirm_delete_modal.min.js"}